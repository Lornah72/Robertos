<!-- landing.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Welcome to Roberto’s Market</title>
  <link rel="stylesheet" href="landing.css" />
</head>
<body>
  <!-- put this where you need the hero -->
<section class="hero">
  <div class="hero-content">
    <div class="left-col">
      <img src="robertoslogo.png" alt="Roberto’s Logo" class="hero-logo">
      <div class="hero-text">
        <p>At Roberto’s Market, we bring you the true taste of Italy right here in Nairobi and Mombasa. From premium pastas, authentic cold cuts, cheeses, to a wide range of everyday essentials, it’s everything you’d find in an Italian supermarket, now in Kenya.</p>
        <p>For wine lovers, explore Roberto’s Cellar, your destination for handpicked, imported Italian wines. Whether you’re a connoisseur or just discovering wine, we offer a curated collection to suit every taste and occasion.</p>
        <p>Come experience the best of Italy, without leaving Kenya.</p>
      </div>
    </div>

    <div class="main-img">
      <img src="WhatsApp Image 2025-07-15 at 09.52.06.jpeg" alt="Grand opening ribbon cutting">
    </div>

    <div class="side-imgs">
      <img src="WhatsApp Image 2025-07-15 at 09.52.07.jpeg" alt="Chef preparing pasta">
      <img src="WhatsApp Image 2025-07-15 at 09.52.07.jpeg" alt="Roberto’s Cellar seating area">
    </div>
  </div>

  <nav class="hero-nav">
    <a href="market.html">Roberto’s Market <span>→</span></a>
    <a href="cellar.html">Roberto’s Cellar <span>→</span></a>
    <a href="restaurant.html">Restaurant <span>→</span></a>
    <a href="order.html">Order Online <span>→</span></a>
  </nav>
</section>
<h1 class="page-title">Our Events</h1>
  <div id="posters-container"></div>

  <!-- 1) Load the UMD Supabase script so window.supabase is defined -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.js"></script>
  
  <!-- 2) Then your application code -->
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize your Supabase client
      const SUPABASE_URL     = 'https://hdukbuwmezqyxzsqgqff.supabase.co';
      const SUPABASE_ANON_KEY= 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkdWtidXdtZXpxeXh6c3FncWZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0ODU5ODAsImV4cCI6MjA2NTA2MTk4MH0.xxyb5u5cvYPS6LvVD73UJDdVe8nhBGNdS6kmP3hPyYo';
      const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      // Fetch and render posters
      const loadPosters = async () => {
        const { data, error } = await supabase
          .from('events')
          .select('id, image_path')
          .order('created_at', { ascending: false });

        if (error) {
          console.error('Error loading events:', error);
          return;
        }

        const container = document.querySelector('#posters-container');
        container.innerHTML = '';

        data.forEach(evt => {
          // build public URL
          const { publicURL, error: urlErr } = supabase
            .storage
            .from('posters')
            .getPublicUrl(evt.image_path);

          if (urlErr) {
            console.error('URL error:', urlErr);
            return;
          }

          // create card
          const card = document.createElement('div');
          card.className = 'poster-card';
          card.innerHTML = `
            <div class="corner top-left"></div>
            <div class="corner top-right"></div>
            <img src="${publicURL}" alt="Event Poster">
            <div class="corner bottom-left"></div>
            <div class="corner bottom-right"></div>
          `;
          container.appendChild(card);
        });
      };

      // Initial load
      await loadPosters();
    });
  </script>

</body>
</html>
